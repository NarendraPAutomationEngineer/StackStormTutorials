version: 1.0
description: simple workflow to get result of local action
vars:
  - stdout: None
  - stderr: None
tasks:
  LocalAction:
    action: core.local
    input:
      cmd: "whoamis"
    next:
     - when: <% succeeded() %>
       publish:
         - r: <% result() %>
         - stdout:  <% result().stdout %>
     - when: <% failed() %>
       publish:
         - r: <% result() %>
         - stderr:  <% result().stderr %>
output:
 - result: <% ctx(r) %>
 - stdout:  <% ctx(stdout) %>
 - stderr:  <% ctx(stderr) %>
